# UI設計書

## 画面遷移一覧

### 🔐 Auth / Account

| **画面ID** | **パス** | **画面名** | **役割** | **主な操作** |
|-----------|---------|----------|---------|-------------|
| **AUTH-LOGIN** | /login | ログイン | Guest | 「Googleでログイン」→ 認証成功で/notesへ |
| **AC-ME** | /my-notes?status=&q=&page= | マイノート一覧 | Account | 自分のノート一覧表示／検索・絞込（status=draft\|publish, q=キーワード, page）<br>ノート詳細へ／新規作成へ／ログアウト |

### 📝 Note（固定フォーマット）

| **画面ID** | **パス** | **画面名** | **役割** | **主な操作** |
|-----------|---------|----------|---------|-------------|
| **N-LIST** | /notes?status=&q=&page= | ノート一覧 | Account / OtherAccount | 検索（タイトル/本文）・絞込（status）・ページング<br>ノート詳細へ／「新規作成」→/notes/new／テンプレ一覧へ |
| **N-DETAIL** | /notes/:noteId | ノート詳細 | 全員（閲覧可）／Ownerのみ編集可 | セクション表示（Problem/原因/対策/Design/Verification/NextSteps）<br>Owner: 「編集」→/notes/:id/edit、「削除」(確認モーダル→成功で/notesへ)、「公開/下書き切替」<br>テンプレ名クリック→/templates/:templateId |
| **N-NEW** | /notes/new | ノート新規作成 | Account | テンプレ選択（必須）→セクション入力（文字列のみ）<br>「保存」→/notes/:id／「キャンセル」→/notes |
| **N-EDIT** | /notes/:noteId/edit | ノート編集 | Ownerのみ | セクション編集／ステータス切替（Draft⇄Publish）<br>「保存」→/notes/:id／「削除」(確認→/notes)／「キャンセル」→/notes/:id |

### 🧩 Template（フォーマット定義）

| **画面ID** | **パス** | **画面名** | **役割** | **主な操作** |
|-----------|---------|----------|---------|-------------|
| **T-LIST** | /templates?q=&page= | テンプレ一覧 | 全員 | 検索（テンプレ名/項目名）・ページング<br>テンプレ詳細へ／「新規作成」→/templates/new |
| **T-DETAIL** | /templates/:templateId | テンプレ詳細 | 全員（閲覧可）／Ownerのみ編集可 | 項目一覧表示（label/order/required）<br>Owner: 「編集」→/templates/:id/edit、**「削除」**（**使用中なら非活性**）<br>「このテンプレでノート作成」→/notes/new?templateId=:id |
| **T-NEW** | /templates/new | テンプレ新規作成 | Account | 項目追加／並べ替え／必須設定<br>「保存」→/templates/:id／「キャンセル」→/templates |
| **T-EDIT** | /templates/:templateId/edit | テンプレ編集 | Ownerのみ | 項目追加/変更/並替<br>保存／削除（**使用中NG**）／キャンセル→/templates/:id |

## グローバル遷移・ナビ

- **ロゴ（左上）**：クリックで /notes（ノート一覧）へ遷移
- **サイドバー（固定表示）**：
  - 🗒️ **Notes** → /notes（ノート一覧）
  - 🧩 **Templates** → /templates（テンプレート一覧）
  - 🏠 **My Notes** → /my-notes（自分のノート一覧）
- **右上ユーザーメニュー（ログイン中のみ表示）**：
  - プロフィールアイコンをクリックでドロップダウン表示
    - **My Notes** → /my-notes（ショートカット）
    - **Logout** → /login（ログアウト後リダイレクト）
- **未ログイン（Guest）時**：
  - サイドバー非表示
  - /login（Googleログイン画面）のみアクセス可能
- **初回ログイン成功時**：/notes へリダイレクト
- **404 / 権限なし**：/404 / 403（簡易エラーページ表示）

## 🔎 検索クエリ（MVP）

- **ノート一覧**：/notes?q=検索語&status=draft|publish&page=1
  - 検索対象＝**タイトルのみ**（MVPではセクション本文の検索は未実装）
- **テンプレ一覧**：/templates?q=検索語&page=1
  - 検索対象＝**テンプレート名のみ**（MVPでは項目名の検索は未実装）

## 画面設計詳細

### AUTH-LOGIN（ログイン）

| **区分** | **項目／操作** | **説明** |
|---------|--------------|----------|
| 表示 | サービスロゴ | 「Mini Notion」ロゴ（クリックで /notes へ戻ってもOK） |
| 表示 | サブコピー | 「設計メモを構造化して残すミニノートアプリ」など簡単な説明 |
| 操作 | **Googleでログイン** ボタン | OAuth 認証。成功時 /notes にリダイレクト |

### N-LIST（ノート一覧）

| **区分** | **項目／操作** | **説明** |
|---------|--------------|----------|
| 表示 | **タイトル** | ノートのタイトル（クリックで /notes/:id に遷移） |
| 表示 | **ステータス** | Draft／Publish |
| 表示 | **更新日時** | updatedAt（降順でソート） |
| 操作 | **検索ボックス** | タイトル／本文テキストの部分一致検索 |
| 操作 | **ステータスフィルタ** | Draft／Publish で絞り込み |
| 操作 | **新規作成** ボタン | /notes/new に遷移 |
| 操作 | **ノートクリック** | /notes/:id（詳細）へ |

### N-DETAIL（ノート詳細）

| **区分** | **説明** |
|---------|----------|
| 表示：**タイトル** | ノートタイトル |
| 表示：**各セクション** | テンプレに基づく内容（Problem／原因／対策／Design／Verification／Next Steps） |
| 表示：**作成者／更新日時** | Account.name（owner）＋ updatedAt |
| 表示：**ステータス** | Draft／Publish |
| 操作：**編集**（Ownerのみ） | /notes/:id/edit へ遷移 |
| 操作：**削除**（Ownerのみ） | 確認モーダル→削除→ /notes へ戻る |
| 操作：**ステータス切替**（Ownerのみ） | Draft ⇄ Publish のトグル（ドメインルール準拠） |
| 操作：**テンプレート名リンク** | /templates/:templateId へ遷移 |

### N-NEW（ノート新規作成）

| **区分** | **項目／操作** | **説明** |
|---------|--------------|----------|
| 入力 | **タイトル**（必須） | ノートのタイトル |
| 入力 | **テンプレート選択**（必須） | /templates から選択（templateId をセット） |
| 入力 | **各セクション（文字入力欄）** | テンプレに基づく項目（文字列のみ） |
| 操作 | **保存** | 作成→ /notes/:id へ遷移 |
| 操作 | **キャンセル** | /notes へ戻る |

### N-EDIT（ノート編集）

| **区分** | **項目／操作** | **説明** |
|---------|--------------|----------|
| 表示 | **現在のステータス** | Draft／Publish（切替可能、Ownerのみ） |
| 入力 | **タイトル**（必須） | 既存タイトル編集 |
| 入力 | **各セクション（文字入力欄）** | 既存内容編集（文字列のみ） |
| 操作 | **ステータス切替**（Ownerのみ） | Draft ⇄ Publish |
| 操作 | **保存** | 更新→ /notes/:id |
| 操作 | **削除**（Ownerのみ） | 確認→削除→ /notes |
| 操作 | **キャンセル** | /notes/:id へ戻る |

### T-LIST（テンプレート一覧）

| **区分** | **項目／操作** | **説明** |
|---------|--------------|----------|
| 表示 | **テンプレート名** | 一覧表示（クリックで /templates/:id） |
| 表示 | **作成者** | Owner（Account.name） |
| 操作 | **検索ボックス** | テンプレ名／項目名の部分一致検索 |
| 操作 | **新規作成** ボタン | /templates/new へ遷移 |
| 操作 | **テンプレクリック** | /templates/:id へ遷移 |

### T-DETAIL（テンプレート詳細）

| **区分** | **項目／操作** | **説明** |
|---------|--------------|----------|
| 表示 | **テンプレート名** | 名称表示 |
| 表示 | **項目リスト** | label／order／isRequired の一覧表示 |
| 表示 | **作成者** | Owner（Account.name） |
| 操作 | **編集**（Ownerのみ） | /templates/:id/edit へ遷移 |
| 操作 | **削除**（Ownerのみ） | 使用中テンプレは**削除ボタンを無効化**（disabled） |
| 操作 | **このテンプレでノート作成** | /notes/new?templateId=:id へ遷移 |

### T-NEW（テンプレート新規作成）

| **区分** | **項目／操作** | **説明** |
|---------|--------------|----------|
| 入力 | **テンプレート名**（必須） | 名称入力 |
| 入力 | **項目追加** | label／isRequired／order を追加・編集 |
| 操作 | **項目の並べ替え** | ドラッグ＆ドロップで順序変更 |
| 操作 | **保存** | 作成→ /templates/:id へ遷移 |
| 操作 | **キャンセル** | /templates へ戻る |

### T-EDIT（テンプレート編集）

| **区分** | **項目／操作** | **説明** |
|---------|--------------|----------|
| 入力 | **テンプレート名** | 名称編集可 |
| 入力 | **項目リスト** | 既存Fieldを表示／編集（label／isRequired／order） |
| 操作 | **項目追加／削除／並替** | UI で操作（使用中でも項目追加は可、削除は要検討） |
| 操作 | **保存** | 更新→ /templates/:id |
| 操作 | **削除**（Ownerのみ） | **使用中はNG**（ボタン非活性／注意文言） |
| 操作 | **キャンセル** | /templates/:id へ戻る |

### AC-ME（マイノート一覧）

| **区分** | **項目／操作** | **説明** |
|---------|--------------|----------|
| 表示 | 自分のノートリスト | ownerId == Account.id のノートのみ表示 |
| 表示 | ステータス | Draft／Publish |
| 表示 | 更新日時 | 最終更新日 |
| 操作 | 検索ボックス | 自分のノート内で検索（タイトル／本文） |
| 操作 | ノートクリック | /notes/:id へ遷移（編集／削除は詳細／編集画面で対応） |
| 操作 | 新規作成 | /notes/new へ遷移 |