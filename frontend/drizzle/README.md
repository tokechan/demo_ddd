# Drizzle Migrations

This directory contains database migrations generated by Drizzle Kit.

## Setup

1. Create `.env.local` file with your database connection:
   ```
   DATABASE_URL=postgresql://user:password@localhost:5432/mini_notion
   ```

2. Install dependencies:
   ```bash
   npm install
   ```

## Migration Commands

### Generate Migration
Generate a new migration based on schema changes:
```bash
npm run db:generate
```

### Push Schema (Development)
Push schema changes directly to the database (for development):
```bash
npm run db:push
```

### Run Migrations
Apply migrations to the database:
```bash
npm run db:migrate
```

### Database Studio
Open Drizzle Studio to browse your database:
```bash
npm run db:studio
```

## Migration Flow

1. Modify schema in `src/external/client/database/schema.ts`
2. Generate migration: `npm run db:generate`
3. Review generated SQL files in this directory
4. Apply migrations: `npm run db:migrate`

## Notes

- Migrations are run in alphanumerical order
- Each migration file contains both up and down migrations
- Never modify generated migration files directly
- For production, always use migrations instead of push